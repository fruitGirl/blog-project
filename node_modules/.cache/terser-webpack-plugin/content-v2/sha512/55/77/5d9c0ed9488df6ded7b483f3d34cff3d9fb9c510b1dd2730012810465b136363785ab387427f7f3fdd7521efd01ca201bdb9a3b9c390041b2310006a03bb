{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{432:function(e,n,s){\"use strict\";s.r(n);var a=s(2),t=Object(a.a)({},(function(){var e=this,n=e._self._c;return n(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[n(\"blockquote\",[n(\"p\",[e._v(\"项目中大家是不是经常使用delete删除一个对象的属性，那问问自己对这么常见的delete操作符又知道多少呢？（我着实觉得自己好菜，呜呜呜...）\")])]),e._v(\" \"),n(\"h4\",{attrs:{id:\"delete是干什么的\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#delete是干什么的\"}},[e._v(\"#\")]),e._v(\" delete是干什么的？\")]),e._v(\" \"),n(\"p\",[e._v(\"delete操作符用于删除对象的某个属性。如果没有指向这个属性的引用，那它最终会被释放。\")]),e._v(\" \"),n(\"p\",[e._v(\"语法：\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",[n(\"code\",[e._v(\"delete object.property\\ndelete object['property']\\ndelete  object[index]\\n\")])])]),n(\"p\",[e._v(\"参数：\")]),e._v(\" \"),n(\"ul\",[n(\"li\",[e._v(\"object：对象的名称\")]),e._v(\" \"),n(\"li\",[e._v(\"property：要删除的对象的属性\")]),e._v(\" \"),n(\"li\",[e._v(\"index: 表示要删除的数组下标\")])]),e._v(\" \"),n(\"p\",[e._v(\"返回值：\")]),e._v(\" \"),n(\"p\",[e._v(\"删除成功时返回true，删除失败时返回false\")]),e._v(\" \"),n(\"blockquote\",[n(\"p\",[e._v(\"注意：\"),n(\"code\",[e._v(\"delete\")]),e._v(\"操作符与直接释放内存\"),n(\"strong\",[e._v(\"无关\")])])]),e._v(\" \"),n(\"p\",[e._v(\"详解：使用delete只是将属性的值设置为undefined，而不是从内存中完全删除该属性。他们不会立即释放该属性占的内存，浏览器可能在将来合适的时刻自动回收内存。这里就涉及到垃圾回收机制了，有兴趣的可以去了解下\")]),e._v(\" \"),n(\"h4\",{attrs:{id:\"delete的特殊的点\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#delete的特殊的点\"}},[e._v(\"#\")]),e._v(\" delete的特殊的点\")]),e._v(\" \"),n(\"ol\",[n(\"li\",[n(\"p\",[e._v(\"删除对象中不存在的属性，delete仍然会返回true\")]),e._v(\" \"),n(\"p\",[e._v('var obj = {\\nname: \"困芽芽\"\\n}')]),e._v(\" \"),n(\"p\",[e._v('console.log(\"删除没有的属性:\", delete obj.age, obj);')]),e._v(\" \"),n(\"p\",[e._v('console.log(\"删除存在的属性:\", delete obj.name, obj);')])])]),e._v(\" \"),n(\"p\",[e._v(\"运行结果如下\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",[n(\"code\",[e._v('删除没有的属性: true {\"name\":\"困芽芽\"}\\n删除存在的属性: true {}\\n')])])]),n(\"ol\",[n(\"li\",[e._v(\"如果对象的原型链上有和待删除属性同样的属性，那么删除属性之后，对象会使用原型链上的那个属性\")])]),e._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v('function Person() {\\n  this.name = \"困芽芽\"\\n}\\n Person.prototype.name = \"lihua\"\\n\\n var person = new Person();\\n\\n\\n delete person.name;\\n // person.name仍然可以用，并获取原型链上的name值\\n console.log(\"name:\", person.name); // lihua\\n\\n// 从原型链上删除\\n delete Person.prototype.name; // true\\n\\n console.log(\"name prototype:\", person.name); // undefined\\n\\n')])]),e._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[e._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"17\")]),n(\"br\")])]),n(\"ol\",[n(\"li\",[e._v(\"不可设置（Non-configurable）属性不能移除。\")])]),e._v(\" \"),n(\"ul\",[n(\"li\",[n(\"p\",[e._v(\"像Math、Array、Object内置对象的属性不能删除\")])]),e._v(\" \"),n(\"li\",[n(\"p\",[e._v(\"使用Object.definePropery()设置不可设置的不能删除\")]),e._v(\" \"),n(\"p\",[e._v('// 内置属性不能删除\\nconsole.log(\"Math.PI\", delete Math.PI) // false')]),e._v(\" \"),n(\"p\",[e._v(\"var o = {};\")]),e._v(\" \"),n(\"p\",[e._v('// 设置不可设置移除无效\\nObject.defineProperty(o, \"name\", {\\nconfigurable: false, // 设置不可配置\\nwritable: true,\\nvalue: \"困芽芽\",')]),e._v(\" \"),n(\"p\",[e._v('})\\nconsole.log(\"设置不可设置\", delete o.name , o.name)')])])]),e._v(\" \"),n(\"ol\",[n(\"li\",[e._v(\"在任何使用\"),n(\"code\",[e._v(\"var\")]),e._v(\"声明的属性不能从全局作用于或者函数作用域中删除\")])]),e._v(\" \"),n(\"p\",[e._v(\"ES5为我们提供了\"),n(\"code\",[e._v(\"Object.getOwnPropertyDescriptor(Object, property)\")]),e._v(\"来获取内部属性，那我们来看下var声明的全局变量的属性是什么样的吧\")]),e._v(\" \"),n(\"p\",[e._v(\"我们先来看一个栗子\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",[n(\"code\",[e._v('var a = 1;\\nconsole.log(\"全局属性a:\", Object.getOwnPropertyDescriptor(window, \"a\"))\\n\\nvar persons = {\\n  name: \"困芽芽\"\\n}\\n\\nconsole.log(\"persons中的属性:\", Object.getOwnPropertyDescriptor(persons, \"name\"))\\n')])])]),n(\"p\",[e._v(\"运行结果为\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",[n(\"code\",[e._v('全局属性a: {\\n    \"value\":1,\\n    \"writable\":true,\\n    \"enumerable\":true,\\n    \"configurable\":false\\n}\\n\\npersons: {\\n    \"value\":\"困芽芽\",\\n    \"writable\":true,\\n    \"enumerable\":true,\\n    \"configurable\":true\\n}\\n')])])]),n(\"p\",[e._v(\"我们发现用var声明的a变量的configurable是不可设置的，那我们猜想a肯定是不能移除的\\npersons中的name属性的configurable是可设置的，那么他是可移除的.\")]),e._v(\" \"),n(\"p\",[e._v(\"我们验证一下\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v('console.log(\"a:\", delete a); // false\\nconsole.log(\"persons name:\", delete persons.name); // true\\n\\n')])]),e._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[e._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"3\")]),n(\"br\")])]),n(\"p\",[e._v(\"哈哈哈，确实如此\")]),e._v(\" \"),n(\"p\",[n(\"strong\",[e._v(\"我们如果不用var声明b又会如何\")])]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",[n(\"code\",[e._v('b = 2;\\nconsole.log(\"b:\", delete b); // true\\n')])])]),n(\"p\",[e._v(\"结果删除成功了\")]),e._v(\" \"),n(\"p\",[e._v(\"我们通过\"),n(\"code\",[e._v('Object.getOwnPropertyDescriptor(window, \"b\")')]),e._v(\"可以得到以下结果\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",[n(\"code\",[e._v('{\"value\":2,\"writable\":true,\"enumerable\":true,\"configurable\":true}\\n')])])]),n(\"p\",[e._v(\"因为b是全局作用域的一个属性，没有var声明，他是可设置的，所以可以删除。\")]),e._v(\" \"),n(\"p\",[n(\"strong\",[e._v(\"我们再来看下函数作用域中栗子\")])]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",[n(\"code\",[e._v('function test() {\\n  var c = 5;\\n  console.log(\"c:\", delete c); // false\\n}\\ntest();\\nconsole.log(\"外部c:\", delete c); //  true\\n')])])]),n(\"p\",[e._v(\"5.使用let或者const声明的不能从它被声明作用域中删除\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v('let color1 = \"red\";\\nconsole.log(\"color1:\", delete color1, color1); // false red\\n\\nconst color2 = \"green\"\\nconsole.log(\"color2:\", delete color2, color2); // false green\\n\\nconst obj1 = {\\n  color: \"blue\"\\n}\\nconsole.log(\"obj1:\", delete obj1); // false\\nconsole.log(\"obj1---color:\", delete obj1.color, obj1.color); // true undefined\\n\\n')])]),e._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[e._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"12\")]),n(\"br\")])]),n(\"p\",[e._v(\"6.删除数组元素时，数组长度不受影响\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",[n(\"code\",[e._v(\"var arrs = [1, 2, 3, 4,5]\\ndelete arrs[3];\\nconsole.log(arrs); // [1, 2, 3, ,5]\\n\\nif (3 in arrs) {\\n  // 不会进到这里来\\n}\\n\")])])]),n(\"p\",[e._v(\"上面的例子发现删除数组，长度不受限制。但是我们如果想让一个数组元素继续存在，但是其值是undefined，那么可以把undefined赋值给这个元素，而不是使用delete\\n如下\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",[n(\"code\",[e._v(\"var arrs = [1, 2, 3, 4,5]\\narrs[3] = undefined;\\n\\nif (3 in arrs) {\\n  // 会进到这里来\\n}\\n\")])])]),n(\"p\",[e._v(\"如果真的想从数组中移除数据，我们可以通过splice方法\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",[n(\"code\",[e._v(\"arrs.splice(3, 1)\\nconsole.log(arrs) // [1, 2, 3, 5]\\n\")])])]),n(\"h4\",{attrs:{id:\"严格模式下\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#严格模式下\"}},[e._v(\"#\")]),e._v(\" 严格模式下\")]),e._v(\" \"),n(\"ul\",[n(\"li\",[n(\"p\",[e._v(\"不可配置的属性，会抛出错误\")])]),e._v(\" \"),n(\"li\",[n(\"p\",[e._v(\"如果对一个变量直接引用、函数参数或者函数名直接用delete会抛出错误，为避免这个我们必须以\"),n(\"code\",[e._v(\"delete object.property\")]),e._v(\"或\"),n(\"code\",[e._v(\"delete object['property']\")]),e._v(\"的形式使用 delete 运算符\")]),e._v(\" \"),n(\"p\",[e._v('\"use strict\"\\nvar fruit = \"apple\";\\nconsole.log(delete fruit);// SyntaxError')]),e._v(\" \"),n(\"p\",[e._v(\"function fnc() {\")]),e._v(\" \"),n(\"p\",[e._v(\"}\\nconsole.log(delete fnc); // SyntaxError\")])])]),e._v(\" \"),n(\"h4\",{attrs:{id:\"性能\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#性能\"}},[e._v(\"#\")]),e._v(\" 性能\")]),e._v(\" \"),n(\"p\",[e._v(\"我们项目中delete用的还是比较多，我们来看下用delete和object.key = undefined的对比\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v('console.time(\"demo\")\\nvar objDemo = {\\n  age: 16\\n}\\ndelete objDemo.age;\\nconsole.timeEnd(\"demo\")\\n\\n')])]),e._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[e._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[e._v(\"7\")]),n(\"br\")])]),n(\"p\",[e._v(\"运行发现\")]),e._v(\" \"),n(\"p\",[n(\"img\",{attrs:{src:\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e11208295b61465eb10cb7a45ced1dee~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image.png\"}})]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",[n(\"code\",[e._v('console.time(\"demo\")\\nvar objDemo = {\\n  age: 16\\n}\\nobjDemo.age = undefined;\\nconsole.timeEnd(\"demo\")\\n')])])]),n(\"p\",[n(\"img\",{attrs:{src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/977c7a12743d4f579cf2641237bd4ec3~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image.png\"}})]),e._v(\" \"),n(\"p\",[e._v(\"通过上图我们知道用delete的时间0.11ms,undefined时间为0.55ms，对比之下设置为undefined会快一半\")]),e._v(\" \"),n(\"p\",[e._v(\"随意我们我们尽量用undefined能提升点性能。\")]),e._v(\" \"),n(\"p\",[e._v(\"参考文章；\\n\"),n(\"a\",{attrs:{href:\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete\"),n(\"OutboundLink\")],1)])])}),[],!1,null,null,null);n.default=t.exports}}]);","extractedComments":[]}